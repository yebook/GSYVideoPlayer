


  +-----------------------------------------------------------------+     +----------------------------------------------------------------------------------------------------+
  |                                                                 |     |                                                                                                    |
  |     +------------------------+     +------------------------+   |     |  渲 染 层                                                                                          |
  |     |   ProxyCacheManager    |     |  ExoPlayerCacheManager |   |     |        +---------------------+  +---------------------+  +---------------------+                   |
  |     +-------------+----------+     +----------------+-------+   |     |        |                     |  |                     |  |                     |                   |
  |                   |                                 |           |     |        |    TextureView      |  |     SurfaceView     |  |    GLSurfaceView    |                   |
  |                   |     +--------------------+      |           |     |        |                     |  |                     |  |                     |                   |
  |                   |     |                    |      |           |     |        +---------+-----------+  +---------+-----------+  +----------+----------+                   |
  |                   +----->   ICacheManager    <------+           |     |                  |                        |                         |                              |
  |                         |                    |                  |     |                  |                        |                         |                              |
  |   本 地 缓 存           +-----^------+-------+                  |     |                  |                        |                         |                              |
  |                               |      |                          |     |                  |          +-------------v---------------+         |                              |
  +-----------------------------------------------------------------+     |                  +---------->       IGSYRenderView        <---------+                              |
                                  |      |                                |                             +-----------------------------+                                        |
                            +-----+------v-------+                        +----------------------------------------------------------------------------------------------------+
                            |                    |                                                                    |
                            |     IMediaPlayer   |                                                              GSYRen|erView
                            |                    |                                                                    |
                            +---------^----------+                                                                    |
                                      |                                                  +-------------------------------------------------------------------------------------+
+-------------------------------------+-----------------------------------------+        |                +-----------v------------+                                           |
|                                                                               |        |    UI 层       |                        |                                           |
|  播 放 内 核 层                                                               |        |                |  GSYTextureRenderView  |  渲 染 层                                 |
|                                                                               |        |                |                        |                                           |
|  +---------------------+  +---------------------+  +---------------------+    |        |                +-----------^------------+                                           |
|  |                     |  |                     |  |                     |    |        |                            |                                                        |
|  |    IjkMediaPlayer   |  |     ExoPlayer2      |  |     MediaPlayer     |    |        |                +-----------+------------+                                           |
|  |                     |  |                     |  |                     |    |        |                |                        |                                           |
|  +-----------+---------+  +---------+-----------+  +---------------+-----+    |        |                |     GSYVideoView       |  播 放 控 件 UI 层                        |
|              |                      |                              |          |        |                |                        |                                           |
|              |                      |                              |          |        |                +-----------^------------+                                           |
|              |                      |                              |          |        |                            |                                                        |
|              |                      |                              |          |        |                +-----------+------------+                                           |
|              |                      |                              |          |        |                |                        |                                           |
|              |             +--------v--------+                     |          |        |                |   GSYVideoControlView  |  播 放 控 件 UI 控 制 层                  |
|              |             |                 |                     |          |        |                |                        |                                           |
|              +------------->  IPlayerManager <---------------------+          |        |                +-----------^------------+                                           |
|                            |                 |                                |        |                            |                                                        |
|                            +-----------------+                                |        |                +-----------+------------+                                           |
+-------------------------------------------------------------------------------+        |                |                        |                                           |
                                      |                                                  |                |   GSYBaseVideoPlayer   |  播 放 控 件 处 理 大 小 屏 等 业 务      |
              +-----------------------------------------+                                |                |                        |                                           |
              |                       |                 |                                |                +-----------^------------+                                           |
              | Manager层 ++-----------v------------+   |                                |                            |                                                        |
              |           |                        |    |    GSYVideoViewBridge          |                +-----------+------------+                                           |
              |           |                        |    |                                |                |                        |                                           |
              |           |   GSYVideoBaseManager  <------------------------------------------------------>    GSYVideoPlayer      |  Manager 交 互 层                         |
              |           |                        |    |                                |                |                        |                                           |
              |           |                        |    |                                |                +------------------------+                                           |
              |           +------------------------+    |                                |                                                                                     |
              |                                         |                                |                                                                                     |
              |                                         |                                |                                                                                     |
              |                                         |                                |                                                                                     |
              |                                         |                                +-------------------------------------------------------------------------------------+
              +-----------------------------------------+
